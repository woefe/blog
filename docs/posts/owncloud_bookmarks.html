<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Woefe's Blog
            
                - Bookmarks with ownCloud and Vimperator
            
        </title>
        <link rel="icon" type="image/png" href="../images/favicon.png">
        <link rel="stylesheet" href="../css/default.css" />
        <link rel="stylesheet" href="../css/syntax.css" />
    </head>
    <body>
        <header>
            <div class="logo">
                <a href="../">Woefe's Blog</a>
            </div>
        </header>

        <main>
            <article class="post">
    <h1 class="post_title">Bookmarks with ownCloud and Vimperator</h1>
    <section class="post_header">
        Posted on May 23, 2016
        
    </section>
    <section>
        <p>I recently added the Bookmarks app to my ownCloud installation. This app keeps a simple list of bookmarks synced across
my computers. The Bookmarks app provides a <a href="https://en.wikipedia.org/wiki/Bookmarklet">bookmarklet</a> to add new bookmarks
easily. But there is a problem with using the bookmarklet: I have to click on it! And therefore I have to display the
bookmarks bar or search for the bookmarklet in the bookmarks menu. I don’t like both approaches for following reasons:
The bookmark bar eats too much space on my small notebook screen and searching for the bookmarklet in the menu takes too
long.</p>
<!--more-->
<p>The solution to this problem involves the Firefox plugin “Vimperator”, another great piece of software. Vimperator
rearranges or removes some UI components of Firefox, like the address bar and makes your Browser behave like the
<a href="http://www.vim.org">Vim</a> text editor. In Vimperator one can execute JavaScript code with the <code>:js</code> command. This makes
it possible to execute the JavaScript of the bookmarklet directly in Vimperator. So let’s define a function that adds
a new bookmark to the Bookmarks app and map this function to a keypress in Vimperator.</p>
<p>This snippet of my <code>.vimperatorrc</code> creates a new key binding (<strong>A</strong> in normal mode), which overrides Vimperator’s
default key binding for adding a new bookmark.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>noremap A <span class="op">:</span>js <span class="fu">bmark_owncloud</span>()<span class="op">&lt;</span>CR<span class="op">&gt;</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="op">:</span>js <span class="op">&lt;&lt;</span> EOF</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">bmark_owncloud</span>(){</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> bmark_title <span class="op">=</span> <span class="pp">encodeURIComponent</span>(content<span class="op">.</span><span class="at">document</span><span class="op">.</span><span class="at">title</span>)<span class="op">;</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> bmark_url <span class="op">=</span> <span class="pp">encodeURIComponent</span>(content<span class="op">.</span><span class="at">document</span><span class="op">.</span><span class="at">location</span>)<span class="op">;</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> window_features <span class="op">=</span> <span class="st">'left='</span> <span class="op">+</span> ((<span class="bu">window</span><span class="op">.</span><span class="at">screenX</span><span class="op">||</span><span class="bu">window</span><span class="op">.</span><span class="at">screen</span><span class="op">.</span><span class="at">left</span>) <span class="op">+</span> <span class="dv">10</span>) <span class="op">+</span> <span class="st">',top='</span> <span class="op">+</span> ((<span class="bu">window</span><span class="op">.</span><span class="at">screenY</span><span class="op">||</span><span class="bu">window</span><span class="op">.</span><span class="at">screen</span><span class="op">.</span><span class="at">top</span>) <span class="op">+</span> <span class="dv">10</span>) <span class="op">+</span> <span class="st">',height=500px,width=550px,resizable=1,alwaysRaised=1'</span><span class="op">;</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> window_name <span class="op">=</span> <span class="st">'bkmk_popup'</span><span class="op">;</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> owncloud_url <span class="op">=</span> <span class="st">'https://owncloud.example.com/index.php/apps/bookmarks/bookmarklet?output=popup&amp;url='</span> <span class="op">+</span> bmark_url <span class="op">+</span> <span class="st">'&amp;title='</span> <span class="op">+</span> bmark_title<span class="op">;</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> new_window <span class="op">=</span> <span class="bu">window</span><span class="op">.</span><span class="fu">open</span>(owncloud_url<span class="op">,</span> window_name<span class="op">,</span> window_features)<span class="op">;</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>    <span class="bu">window</span><span class="op">.</span><span class="fu">setTimeout</span>(</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>        <span class="kw">function</span>(){</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>            new_window<span class="op">.</span><span class="fu">focus</span>()</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>        }<span class="op">,</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>        <span class="dv">300</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>    )<span class="op">;</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>}<span class="op">;</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>EOF</span></code></pre></div>
<p>Now the only thing that is left to do, is to change the <code>https://owncloud.example.com</code> to your actual ownCloud
installation and you are good to go!</p>
    </section>
</article>

        </main>

        <footer>
    <nav>
        <a href="../">Home</a>
        ·
        <a href="../about.html">About</a>
        ·
        <a href="../contact.html">Contact</a>
        ·
        <a href="../archive.html">Archive</a>
        ·
        <a href="../atom.xml">Feed</a>
    </nav>
    <hr>
    Site proudly generated by
    <a href="http://jaspervdj.be/hakyll">Hakyll</a>
</footer>

    </body>
</html>
